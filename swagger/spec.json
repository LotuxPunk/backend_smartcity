{"openapi":"3.0.0","info":{"title":"Immanager","version":"1.0.0"},"paths":{"/apartment":{"get":{"tags":["Apartment"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/ApartmentsFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"404":{"description":"Appartements non trouvé"},"500":{"description":"Erreur serveur"}}},"post":{"tags":["Apartment"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/AppartementACreer"},"responses":{"201":{"$ref":"#/components/responses/AppartementCree"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"500":{"description":"Erreur serveur"}}}},"/apartment/{id}":{"get":{"tags":["Apartment"],"parameters":[{"name":"id","description":"ID d'un contrat","in":"path","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/ApartmentFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"404":{"description":"Appartement non trouvé"},"500":{"description":"Erreur serveur"}}}},"/contract":{"post":{"tags":["Contract"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ContratACreer"},"responses":{"201":{"$ref":"#/components/responses/ContratCree"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"500":{"description":"Erreur serveur"}}}},"/contract/{id}":{"get":{"tags":["Contract"],"parameters":[{"name":"id","description":"ID d'un contrat","in":"path","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/ContractFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"404":{"description":"Contrat non trouvé"},"500":{"description":"Erreur serveur"}}}},"/contract/":{"get":{"tags":["Contract"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/ContractsFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"404":{"description":"Contrats non trouvés"},"500":{"description":"Erreur serveur"}}}},"/payment":{"post":{"tags":["Payment"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/PaiementACreer"},"responses":{"201":{"$ref":"#/components/responses/PaiementCree"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"500":{"description":"Erreur serveur"}}}},"/payment/{id}":{"delete":{"tags":["Payment"],"parameters":[{"name":"id","description":"ID d'un paiement","in":"path","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/PaymentDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"500":{"description":"Erreur serveur"}}}},"/tenant":{"post":{"tags":["Tenant"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/LocataireACreer"},"responses":{"201":{"$ref":"#/components/responses/LocataireCree"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"500":{"description":"Erreur serveur"}}}},"/tenant/":{"get":{"tags":["Tenant"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/TenantsFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"404":{"description":"Locataires non trouvé"},"500":{"description":"Erreur serveur"}}}},"/user":{"post":{"tags":["User"],"requestBody":{"$ref":"#/components/requestBodies/UserACreer"},"responses":{"201":{"$ref":"#/components/responses/UserCree"},"400":{"description":"Information(s) manquante(s)"},"500":{"description":"Erreur serveur"}}}},"/user/login":{"post":{"tags":["User"],"description":"renvoie un JWT token permettant l'identification","requestBody":{"description":"login pour la connexion","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"200":{"description":"un token JWT","content":{"text/plain":{"schema":{"properties":{"jwt":{"type":"string","description":"Token JWT"}}}}}},"400":{"description":"L'email et/ou le password ne sont pas correctement défini"},"404":{"description":"L'utilisateur n'a pas été trouvé avec les informations fournies"},"500":{"description":"Erreur serveur"}}}}},"components":{"responses":{"ApartmentsFound":{"description":"renvoie une liste d'appartement","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Apartment"}}}}},"ApartmentFound":{"description":"renvoie une liste d'appartement","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApartmentItem"}}}}},"AppartementCree":{"description":"l'appartement a été créé"},"ContratCree":{"description":"le contrat a été créé"},"ContractFound":{"description":"renvoie une contrat avec l'appartment, le locataire, les échéances et le solde locatif","content":{"application/json":{"schema":{"type":"object","properties":{"contract":{"$ref":"#/components/schemas/Contract"},"balance":{"type":"array","items":{"type":"object","properties":{"amount":{"type":"number","format":"double"},"date":{"type":"string","format":"date"},"id":{"type":"integer"}}}}}}}}},"ContractsFound":{"description":"renvoie une liste de contrats avec l'appartment et le locataire","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ContractItem"}}}}},"PaiementCree":{"description":"le paiement a été créé"},"PaymentDeleted":{"description":"le paiement a été supprimé"},"LocataireCree":{"description":"le locataire a été créé"},"TenantsFound":{"description":"renvoie une liste de locataire","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Tenant"}}}}},"UserCree":{"description":"l'utilisateur a été ajouté à la base de données"},"mustBeOwner":{"description":"L'action demandée ne peut être réalisée que par un propriétaire"},"ErrorJWT":{"description":"le JWT n'est pas valide"},"MissingJWT":{"description":"le JWT n'est pas présent"}},"schemas":{"ApartmentItem":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"name":{"type":"string","description":"Nom de l'appartement"},"city":{"type":"string","description":"Ville"},"address":{"type":"string","description":"Adresse de l'appartement"},"postal_code":{"type":"string","maxLength":4,"minLength":4,"description":"Code postal"},"image":{"type":"string","format":"binary","nullable":true,"description":"Nom du fichier image"},"contract":{"type":"array","items":{"$ref":"#/components/schemas/ContractModel"}}}},"Contract":{"type":"object","properties":{"id":{"type":"integer"},"waranty":{"type":"number","format":"double","description":"Montant de la garantie"},"cpas_waranty":{"type":"boolean","description":"La garantie est fournie par le CPAS"},"date_start":{"type":"string","format":"date","description":"Date de début du contrat"},"date_end":{"type":"string","format":"date","description":"Date de fin du contrat"},"ref_contract":{"type":"string","nullable":true,"description":"Référence d'enregistrement d'un contrat"},"tenant":{"$ref":"#/components/schemas/Tenant"},"apartment":{"$ref":"#/components/schemas/Apartment"},"payments":{"type":"array","items":{"$ref":"#/components/schemas/Payment"}},"rentoweds":{"type":"array","items":{"$ref":"#/components/schemas/RentOwed"}}}},"ContractItem":{"type":"object","properties":{"id":{"type":"integer"},"waranty":{"type":"number","format":"double","description":"Montant de la garantie"},"cpas_waranty":{"type":"boolean","description":"La garantie est fournie par le CPAS"},"date_start":{"type":"string","format":"date","description":"Date de début du contrat"},"date_end":{"type":"string","format":"date","description":"Date de fin du contrat"},"ref_contract":{"type":"string","nullable":true,"description":"Référence d'enregistrement d'un contrat"},"tenant":{"$ref":"#/components/schemas/Tenant"},"apartment":{"$ref":"#/components/schemas/Apartment"}}},"Login":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string","format":"password"}},"required":["email","password"]},"Apartment":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"name":{"type":"string","description":"Nom de l'appartement"},"city":{"type":"string","description":"Ville"},"address":{"type":"string","description":"Adresse de l'appartement"},"postal_code":{"type":"string","maxLength":4,"minLength":4,"description":"Code postal"},"image":{"type":"string","format":"binary","nullable":true,"description":"Nom du fichier image"}}},"ContractModel":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"waranty":{"type":"number","format":"double","description":"Montant de la garantie"},"cpas_waranty":{"type":"boolean","description":"La garantie est fournie par le CPAS"},"date_start":{"type":"string","format":"date","description":"Date de début du contrat"},"date_end":{"type":"string","format":"date","description":"Date de fin du contrat"},"ref_contract":{"type":"string","nullable":true,"description":"Référence d'enregistrement d'un contrat"},"tenantId":{"type":"integer"},"apartmentId":{"type":"integer"}}},"Payment":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"amount":{"type":"number","format":"double","description":"Montant du paiement"},"date":{"type":"string","format":"date","description":"Date du paiement"}}},"RentOwed":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"rent":{"type":"number","format":"double","description":"Montant du loyer"},"charge":{"type":"number","format":"double","description":"Montant des charges"},"date":{"type":"string","format":"date","description":"Date de début du loyer dû"}}},"Tenant":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"firstname":{"type":"string","description":"Prénom du locataire"},"lastname":{"type":"string","description":"Nom de famille du locataire"},"register":{"type":"string","description":"Registre nationnal"},"address":{"type":"string","description":"Adresse du locataire avant l'entrée dans les lieux"}}}},"requestBodies":{"AppartementACreer":{"content":{"multipart/form-data:":{"schema":{"$ref":"#/components/schemas/Apartment"}}}},"ContratACreer":{"content":{"application/json":{"schema":{"type":"object","properties":{"waranty":{"type":"number","format":"double","description":"Montant de la garantie"},"cpas_waranty":{"type":"boolean","description":"La garantie est fournie par le CPAS"},"date_start":{"type":"string","format":"date","description":"Date de début du contrat"},"date_end":{"type":"string","format":"date","description":"Date de fin du contrat"},"ref_contract":{"type":"string","nullable":true,"description":"Référence d'enregistrement d'un contrat"},"rent":{"type":"number","format":"double","description":"Montant du loyer"},"charge":{"type":"number","format":"double","description":"Montant des charges"},"apartmentId":{"type":"integer","description":"ID de l'appartement"},"tenantId":{"type":"integer","description":"ID du locataire"}}}}}},"PaiementACreer":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Payment"}}}},"LocataireACreer":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}},"UserACreer":{"content":{"application/json":{"schema":{"properties":{"address":{"type":"string"},"lastname":{"type":"string"},"firstname":{"type":"string"},"email":{"type":"string"},"register":{"type":"string"},"password":{"type":"string","format":"password"}},"required":["lastname","firstname","address","password","email","register"]}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}